[workspace]
name = "pixi-emacs"
description = "Doom Emacs dev environment via Pixi â€” no Docker, no system packages"
version = "0.1.0"
platforms = ["osx-arm64", "osx-64", "linux-64", "linux-aarch64"]
channels = ["conda-forge"]

[dependencies]
# Runtime deps for Doom Emacs
git = "*"
ripgrep = "*"
fd-find = "*"
libvterm = "*"
cmake = "*"

# Terminal environment
zellij = "*"
atuin = "*"
direnv = "*"
fish = "*"
starship = "*"
zoxide = "*"

# CLI tools
awscli = "*"
just = "*"
gh = "*"
k9s = "*"

# Language toolchains
go = "*"
nodejs = "*"
openjdk = ">=21,<22"

# Build deps for compiling Emacs from source
autoconf = "*"
automake = "*"
make = "*"
pkg-config = "*"
texinfo = "*"
ncurses = "*"
gnutls = "*"
libxml2 = "*"
libtree-sitter = "<0.24"
libglib = "*"
libjpeg-turbo = "*"
giflib = "*"
libtiff = "*"
libpng = "*"
openssh = ">=10.2p1,<11"
jq = ">=1.8.1,<2"

[tasks]
build-emacs = "bash scripts/build-emacs.sh"
install-tools = "bash scripts/install-tools.sh"
install-doom = { cmd = "bash scripts/install-doom.sh", depends-on = ["build-emacs"] }
setup = { cmd = "echo ok", depends-on = ["doom-sync", "install-tools"] }
doom-sync = { cmd = "bash scripts/doom-sync.sh", depends-on = ["install-doom"] }
emacs = "bash scripts/emacs.sh"
ze = "bash scripts/ze.sh"
clean = "bash scripts/clean.sh"
